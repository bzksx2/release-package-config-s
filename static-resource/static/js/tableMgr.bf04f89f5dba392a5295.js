webpackJsonp([3,6],{0:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(7),r=a.n(n),s=a(2),i=a.n(s),o=a(8),c=a.n(o),l=a(9),u=a.n(l),p=a(10),m=(a.n(p),function(){function e(t){c()(this,e),this.schema=t}return u()(e,[{key:"count",value:function(e){}},{key:"query",value:function(e,t){var a=this._getQuery(t);return a.set("_method","get"),fetch(e,{method:"POST",credentials:"same-origin",body:a})}},{key:"_isRefKey",value:function(e){if(this.schema.child)for(var t=0;t<this.schema.child.length;t++)if(this.schema.child[t]==e)return!0;return!1}},{key:"_getQuery",value:function(e){var t=new URLSearchParams;for(var a in e)if(this._isRefKey(a)){var n=a+"_";for(var r in e[a])t.append(n+r,e[a][r])}else{var s=e[a];if(s instanceof Array)for(var i=0;i<s.length;i++)t.append(a,s[i]);else t.append(a,s)}return t}},{key:"paged",value:function(e){var t=this._getQuery(e);return t.set("_method","get"),fetch(this.schema.queryUrl||this.schema.url,{method:"POST",credentials:"same-origin",body:t})}},{key:"create",value:function(e,t){var a=new FormData;if(a.append(this.schema.name,i()(e)),t)for(var n in t)a.append(n,t[n]);return fetch(this.schema.createUrl||this.schema.url,{method:"POST",credentials:"same-origin",body:a})}},{key:"update",value:function(e,t){var a=new FormData;a.append("_method","put"),a.append(this.schema.name,i()(e));var n=this._getQuery(t),s=!0,o=!1,c=void 0;try{for(var l,u=r()(n.keys());!(s=(l=u.next()).done);s=!0){var p=l.value;a.append(p,n.get(p))}}catch(e){o=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(o)throw c}}return fetch(this.schema.updateUrl||this.schema.url,{method:"POST",credentials:"same-origin",body:a})}},{key:"remove",value:function(e){var t=this._getQuery(e);return t.set("_method","delete"),fetch(this.schema.deleteUrl||this.schema.url,{method:"POST",credentials:"same-origin",body:t})}}]),e}())},105:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(50),r=a.n(n);t.default={components:{tablePage:r.a},data:function(){return{}}}},111:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),r=a(88),s=a.n(r);new n.Vue({el:"#tableMgr",components:{TableMgr:s.a}})},13:function(e,t,a){a(16);var n=a(1)(a(14),a(17),"data-v-1fe8eacb",null);e.exports=n.exports},14:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=a.n(n),s=a(3),i=a.n(s),o=a(0);t.default={props:["activeMenu"],data:function(){return{spanLeft:5,spanRight:19,appList:[]}},computed:{iconSize:function(){return 5===this.spanLeft?14:24}},methods:{toggleClick:function(){5===this.spanLeft?(this.spanLeft=2,this.spanRight=22):(this.spanLeft=5,this.spanRight=19)}},mounted:function(){function e(){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ds=new o.a({queryUrl:"/rest/configServer/access/appMgr",name:"appEntity"}),e.next=3,this.ds.paged();case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,a.success&&(this.appList=[{value:"11",label:"cc"}]);case 8:case"end":return e.stop()}},e,this)}));return e}()}},159:function(e,t){},16:function(e,t){},17:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout",class:{"layout-hide-text":e.spanLeft<5}},[a("Row",{attrs:{type:"flex"}},[a("i-col",{staticClass:"layout-menu-left",attrs:{span:e.spanLeft}},[a("Menu",{attrs:{"active-name":e.activeMenu,theme:"dark",width:"auto"}},[a("div",{staticClass:"layout-logo-left"},[a("Select",{staticStyle:{width:"200px"}},e._l(e.appList,function(t){return a("Option",{key:t,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("Menu-item",{attrs:{name:"appMgr"}},[a("Icon",{attrs:{type:"ios-navigate",size:e.iconSize}}),e._v(" "),a("a",{staticClass:"layout-text",attrs:{href:"index.html"}},[e._v("应用管理")])],1),e._v(" "),a("Menu-item",{attrs:{name:"2"}},[a("Icon",{attrs:{type:"ios-keypad",size:e.iconSize}}),e._v(" "),a("span",{staticClass:"layout-text"},[e._v("用户管理")])],1),e._v(" "),a("Menu-item",{attrs:{name:"roleMgr"}},[a("Icon",{attrs:{type:"ios-analytics",size:e.iconSize}}),e._v(" "),a("a",{staticClass:"layout-text",attrs:{href:"roleMgr.html"}},[e._v("角色管理")])],1),e._v(" "),a("Menu-item",{attrs:{name:"4"}},[a("Icon",{attrs:{type:"ios-analytics",size:e.iconSize}}),e._v(" "),a("span",{staticClass:"layout-text"},[e._v("菜单管理")])],1)],1)],1),e._v(" "),a("i-col",{attrs:{span:e.spanRight}},[a("div",{staticClass:"layout-header"},[a("i-button",{attrs:{type:"text"},on:{click:e.toggleClick}},[a("Icon",{attrs:{type:"navicon",size:"32"}})],1)],1),e._v(" "),a("div",{staticClass:"layout-breadcrumb"},[a("Breadcrumb",[a("Breadcrumb-item",{attrs:{href:"#"}},[e._v("首页")]),e._v(" "),a("Breadcrumb-item",{attrs:{href:"#"}},[e._v("应用中心")]),e._v(" "),a("Breadcrumb-item",[e._v("某应用")])],1)],1),e._v(" "),a("div",{staticClass:"layout-content"},[a("div",{staticClass:"layout-content-main"},[e._t("default")],2)])])],1)],1)},staticRenderFns:[]}},178:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{attrs:{activeMenu:"tableMgr"}},[a("table-page",{attrs:{pageName:"tableMgr"}})],1)},staticRenderFns:[]}},21:function(e,t,a){"use strict";function n(e,t,a){return new p.a(function(n,r){!0!==a&&(e=serviceRootPath+e),$.post(e,t,function(e){n(e)},"json")})}var r=a(2),s=a.n(r),i=a(4),o=a.n(i),c=a(3),l=a.n(c),u=a(40),p=a.n(u),m=a(39),f={};f.phoneRegisted=function(){var e=l()(o.a.mark(function e(t){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="register?_cnd=exists&_method=GET&_pageSize=20&_pageNo=1",r={$phone:t},e.next=4,n(a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.insertUser=function(){var e=l()(o.a.mark(function e(t){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="register?_method=POST",r={$user:s()(t)},e.next=4,n(a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f.getPageConfig=function(e){return m.a[e]},f.getDSConfig=function(e){return m.b[e]},t.a=f},35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=a.n(n),s=a(3),i=a.n(s),o=a(0),c=a(21);t.default={props:["showDialog","formData","formMeta"],data:function(){for(var e={},t=0,a=this.formMeta.length;t<a;t++){var n=this.formMeta[t];"q-select"==n.xType&&(e[n.name]=[])}return{loading:!0,selectDatas:e}},computed:{open:function(){return this.showDialog},formDatas:function(){return this.formData}},mounted:function(){function e(){return t.apply(this,arguments)}var t=i()(r.a.mark(function e(){var t,a,n,s,i,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},a=0,n=this.formMeta.length;case 2:if(!(a<n)){e.next=17;break}if(s=this.formMeta[a],"q-select"!=s.xType){e.next=14;break}return i=s.bind,this.ds=new o.a(c.a.getDSConfig(i)),e.next=9,this.ds.paged();case 9:return l=e.sent,e.next=12,l.json();case 12:u=e.sent,u.success&&(t[s.name]=u.result);case 14:a++,e.next=2;break;case 17:this.selectDatas=t;case 18:case"end":return e.stop()}},e,this)}));return e}(),methods:{handleSave:function(){this.$emit("handleItemChange",this.formDatas,this)},cancel:function(){this.$emit("update:showDialog",!1)}}}},36:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(53),r=a.n(n),s=a(4),i=a.n(s),o=a(3),c=a.n(o),l=a(21),u=a(49),p=a.n(u),m=a(0);t.default={props:["pageName"],components:{formDialog:p.a},data:function(){return{tableMeta:[],tableData:[],selectedItems:[],openFlag:!1,showDialog:!1,formMeta:[],formData:null}},mounted:function(){var e=l.a.getPageConfig(this.pageName).table,t=this._preHandleMeta(e.fieldMeta);this.tableMeta=t.table,this.formMeta=t.form,this.ds=new m.a(l.a.getDSConfig(e.bind)),this._refreshTable()},methods:{_preHandleMeta:function(e){var t={table:[{type:"selection",width:60,align:"center"}],form:[]};if(e)for(var a=0,n=e.length;a<n;a++){var r=e[a];if(0!=r.showInTable){var s={};s.title=r.label,s.key=r.name,"q-select"==r.xType&&(s.key=r.name+"$display$"),t.table.push(s)}0!=r.showInForm&&(t.form.push(r),this.initFormData||(this.initFormData={}),this.initFormData[r.name]="")}return t},_refreshTable:function(){function e(){return t.apply(this,arguments)}var t=c()(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ds.paged();case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,a.success&&(this.tableData=a.result);case 7:case"end":return e.stop()}},e,this)}));return e}(),addItem:function(){this.operType="add",this.formData=r()({},this.initFormData),this.openFlag=!0,this.showDialog=!0},updateItem:function(){0==this.selectedItems.length?this.$Modal.warning({content:"请至少选中一项！"}):(this.operType="update",this.formData=this.selectedItems[0],this.openFlag=!0,this.showDialog=!0)},deleteItems:function(){var e=this.selectedItems.length;if(0==e)this.$Modal.warning({content:"请至少选中一项！"});else{var t=this;this.$Modal.confirm({content:"确定删除所选项吗？",onOk:function(){t.operType="delete";for(var a={ids:[]},n=0;n<e;n++)a.ids.push(t.selectedItems[n].id);t.handleItemChange(a)}})}},itemSelected:function(e,t){this.selectedItems=e,this.$emit("itemSelectEvent",e)},handleItemChange:function(){function e(e,a){return t.apply(this,arguments)}var t=c()(i.a.mark(function e(t,a){var n,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,r=void 0,"add"!=this.operType){e.next=8;break}return e.next=5,this.ds.create(t);case 5:r=e.sent,e.next=18;break;case 8:if("update"!=this.operType){e.next=14;break}return e.next=11,this.ds.update(t,{id:t.id});case 11:r=e.sent,e.next=18;break;case 14:if("delete"!=this.operType){e.next=18;break}return e.next=17,this.ds.remove(t);case 17:r=e.sent;case 18:return e.next=20,r.json();case 20:s=e.sent,n=s.success,n?(this.$Modal.success({content:"操作成功!"}),this.showDialog=!1,this._refreshTable()):this.$Modal.error({content:"操作失败!"});case 23:case"end":return e.stop()}},e,this)}));return e}()}}},39:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n={example:{fieldMeta:[{name:"id",label:"主键",xType:"q-input",showInTable:!1,showInForm:!1},{name:"name",label:"名称",xType:"q-input"},{name:"startTime",label:"生效时间",xType:"q-date"},{name:"appId",label:"所属应用",xType:"q-select",bind:""}]},roleMgr:{table:{bind:"roleMgr",fieldMeta:[{name:"id",label:"主键",xType:"q-input",showInTable:!1,showInForm:!1},{name:"name",label:"名称",xType:"q-input"},{name:"appId",label:"所属应用",xType:"q-select",bind:"appMgr"}]}}},r={example:{queryUrl:"/rest/configServer/access/roleMgr",createUrl:"",updateUrl:"",deleteUrl:"",name:"roleEntity",alias:"role"},roleMgr:{url:"/rest/configServer/access/roleMgr",name:"roleEntity",alias:"role"},appMgr:{url:"/rest/configServer/access/appMgr",name:"appEntity",alias:"app"},pagePermissionMgr:{url:"/rest/configServer/access/pagePermissionMgr",name:"pagePermissionEntity",alias:"pagePermission"},roleRelPagePermissionMgr:{url:"/rest/configServer/access/roleRelPagePermissionMgr",name:"roleRelPagePermissionEntity",alias:"roleRelPagePermission"},apiPermissionMgr:{url:"/rest/configServer/access/apiPermissionMgr",name:"apiPermissionEntity",alias:"apiPermission"},roleRelApiPermissionMgr:{url:"/rest/configServer/access/roleRelApiPermissionMgr",name:"roleRelApiPermissionEntity",alias:"roleRelApiPermission"}}},49:function(e,t,a){var n=a(1)(a(35),a(52),null,null);e.exports=n.exports},5:function(e,t){},50:function(e,t,a){var n=a(1)(a(36),a(51),null,null);e.exports=n.exports},51:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{margin:"15px"}},[a("Button",{attrs:{type:"info"},on:{click:e.addItem}},[e._v("新增")]),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:e.updateItem}},[e._v("修改")]),e._v(" "),a("Button",{attrs:{type:"warning"},on:{click:e.deleteItems}},[e._v("删除")]),e._v(" "),e._t("toolbar")],2),e._v(" "),a("Table",{attrs:{border:"",columns:e.tableMeta,data:e.tableData},on:{"on-selection-change":e.itemSelected}}),e._v(" "),e.openFlag?a("form-dialog",{attrs:{formData:e.formData,formMeta:e.formMeta,showDialog:e.showDialog},on:{"update:showDialog":function(t){e.showDialog=t},handleItemChange:e.handleItemChange}}):e._e()],1)},staticRenderFns:[]}},52:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"编辑","mask-closable":!1},on:{"on-cancel":e.cancel},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("Form",{attrs:{model:e.formDatas,"label-width":80}},e._l(e.formMeta,function(t){return a("Form-item",{key:e.name,attrs:{label:t.label}},["q-input"==t.xType?a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formDatas[t.name],callback:function(a){var n=e.formDatas,r=t.name;Array.isArray(n)?n.splice(r,1,a):e.formDatas[t.name]=a},expression:"formDatas[item.name]"}}):e._e(),e._v(" "),"q-date"==t.xType?a("Date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"选择日期"},model:{value:e.formDatas[t.name],callback:function(a){var n=e.formDatas,r=t.name;Array.isArray(n)?n.splice(r,1,a):e.formDatas[t.name]=a},expression:"formDatas[item.name]"}}):e._e(),e._v(" "),"q-select"==t.xType?a("Select",{attrs:{placeholder:"请选择"},model:{value:e.formDatas[t.name],callback:function(a){var n=e.formDatas,r=t.name;Array.isArray(n)?n.splice(r,1,a):e.formDatas[t.name]=a},expression:"formDatas[item.name]"}},e._l(e.selectDatas[t.name],function(n){return a("Option",{key:t.valueKey||"id",attrs:{value:n[t.valueKey||"id"]}},[e._v(e._s(n[t.textKey||"name"]))])})):e._e()],1)})),e._v(" "),a("div",{slot:"footer"},[a("i-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)},staticRenderFns:[]}},6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),r=a(19),s=a.n(r),i=a(5),o=(a.n(i),a(13)),c=a.n(o);a.d(t,"Vue",function(){return n.default}),n.default.use(s.a),n.default.component("Layout",c.a)},88:function(e,t,a){a(159);var n=a(1)(a(105),a(178),null,null);e.exports=n.exports}},[111]);
//# sourceMappingURL=tableMgr.bf04f89f5dba392a5295.js.map